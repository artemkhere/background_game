{"ast":null,"code":"var _jsxFileName = \"/Users/artemk/background_game/frontend/src/App.js\";\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { setUserData } from './actions/userActions';\nimport TopMenu from './components/TopMenu';\nimport LandingPage from './components/LandingPage';\nimport GameSession from './components/GameSession';\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport Logout from './components/Logout';\n\nfunction App(props) {\n  const {\n    setUserData,\n    user\n  } = props;\n\n  const authenticate = async () => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt && !user.loggedIn) {\n      try {\n        const authResponse = await axios.post(\"http://127.0.0.1:6969/api/auth\", {\n          token: jwt\n        });\n        const userData = {\n          id: authResponse.data.id,\n          email: authResponse.data.email,\n          loggedIn: true\n        };\n        setUserData(userData);\n      } catch (error) {\n        console.log('Error: failed to auth with the jwt.');\n      }\n    }\n  };\n\n  useEffect(() => {\n    authenticate();\n  });\n\n  const renderMainSection = () => {\n    let toRender;\n\n    switch (props.applicationState.currentScreen) {\n      case 'LandingPage':\n        toRender = /*#__PURE__*/React.createElement(LandingPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'GameSession':\n        toRender = /*#__PURE__*/React.createElement(GameSession, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'Login':\n        toRender = /*#__PURE__*/React.createElement(Login, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'Signup':\n        toRender = /*#__PURE__*/React.createElement(Signup, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'Logout':\n        toRender = /*#__PURE__*/React.createElement(Logout, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      default:\n        toRender = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 20\n          }\n        }, \"Error\");\n    }\n\n    return toRender;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TopMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }), renderMainSection());\n}\n\nfunction mapStateToProps(state) {\n  return {\n    applicationState: state.applicationState,\n    user: state.user\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setUserData: setUserData(dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/artemk/background_game/frontend/src/App.js"],"names":["React","useEffect","connect","axios","setUserData","TopMenu","LandingPage","GameSession","Login","Signup","Logout","App","props","user","authenticate","jwt","localStorage","getItem","loggedIn","authResponse","post","token","userData","id","data","email","error","console","log","renderMainSection","toRender","applicationState","currentScreen","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\nimport { setUserData } from './actions/userActions';\n\nimport TopMenu from './components/TopMenu';\nimport LandingPage from './components/LandingPage';\nimport GameSession from './components/GameSession';\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport Logout from './components/Logout';\n\nfunction App(props) {\n  const { setUserData, user } = props;\n\n  const authenticate = async () => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt && !user.loggedIn) {\n      try {\n        const authResponse = await axios.post(\"http://127.0.0.1:6969/api/auth\", { token: jwt });\n        const userData = {\n          id: authResponse.data.id,\n          email: authResponse.data.email,\n          loggedIn: true\n        };\n        setUserData(userData);\n      } catch (error) {\n        console.log('Error: failed to auth with the jwt.')\n      }\n    }\n  }\n\n  useEffect(() => {\n    authenticate();\n  });\n\n  const renderMainSection = () => {\n    let toRender;\n\n    switch(props.applicationState.currentScreen) {\n      case 'LandingPage':\n        toRender = <LandingPage />;\n        break;\n      case 'GameSession':\n        toRender = <GameSession />;\n        break;\n      case 'Login':\n        toRender = <Login />;\n        break;\n      case 'Signup':\n        toRender = <Signup />;\n        break;\n      case 'Logout':\n        toRender = <Logout />;\n        break;\n      default:\n        toRender = <div>Error</div>;\n    }\n\n    return toRender;\n  }\n\n  return (\n    <div>\n      <TopMenu />\n      {renderMainSection()}\n    </div>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    applicationState: state.applicationState,\n    user: state.user\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setUserData: setUserData(dispatch)\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n"]},"metadata":{},"sourceType":"module"}