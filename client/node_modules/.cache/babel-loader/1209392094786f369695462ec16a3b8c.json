{"ast":null,"code":"var _jsxFileName = \"/Users/artemk/background_game/frontend/src/App.js\";\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport \"./App.scss\";\nimport { setUserData } from './actions/userActions';\nimport TopMenu from './components/TopMenu';\nimport ErrorModal from './components/ErrorModal';\nimport LoadingModal from './components/LoadingModal';\nimport LandingPage from './components/LandingPage';\nimport GameSession from './components/GameSession/GameSession';\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport Logout from './components/Logout';\n\nfunction App(props) {\n  const {\n    setUserData,\n    user,\n    applicationState\n  } = props;\n\n  const authenticate = async () => {\n    try {\n      const authResponse = await axios.post(\"http://127.0.0.1:6969/api/auth\", {\n        token: jwt\n      });\n      const userData = {\n        id: authResponse.data.id,\n        email: authResponse.data.email,\n        loggedIn: true\n      };\n      setUserData(userData);\n    } catch (error) {\n      console.error('Error: failed to auth with jwt.');\n    }\n  };\n\n  useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt && !user.loggedIn) {\n      authenticate(jwt);\n    }\n  });\n\n  const renderMainSection = () => {\n    let toRender;\n\n    switch (applicationState.currentScreen) {\n      case 'LandingPage':\n        toRender = /*#__PURE__*/React.createElement(LandingPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'GameSession':\n        toRender = /*#__PURE__*/React.createElement(GameSession, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'Login':\n        toRender = /*#__PURE__*/React.createElement(Login, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'Signup':\n        toRender = /*#__PURE__*/React.createElement(Signup, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'Logout':\n        toRender = /*#__PURE__*/React.createElement(Logout, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      default:\n        toRender = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 20\n          }\n        }, \"Error\");\n    }\n\n    return toRender;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TopMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), applicationState.error && /*#__PURE__*/React.createElement(ErrorModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 34\n    }\n  }), applicationState.loading && /*#__PURE__*/React.createElement(LoadingModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 36\n    }\n  }), renderMainSection());\n}\n\nfunction mapStateToProps(state) {\n  return {\n    applicationState: state.applicationState,\n    user: state.user\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setUserData: setUserData(dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/artemk/background_game/frontend/src/App.js"],"names":["React","useEffect","connect","axios","setUserData","TopMenu","ErrorModal","LoadingModal","LandingPage","GameSession","Login","Signup","Logout","App","props","user","applicationState","authenticate","authResponse","post","token","jwt","userData","id","data","email","loggedIn","error","console","localStorage","getItem","renderMainSection","toRender","currentScreen","loading","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\nimport \"./App.scss\";\n\nimport { setUserData } from './actions/userActions';\n\nimport TopMenu from './components/TopMenu';\nimport ErrorModal from './components/ErrorModal';\nimport LoadingModal from './components/LoadingModal';\nimport LandingPage from './components/LandingPage';\nimport GameSession from './components/GameSession/GameSession';\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport Logout from './components/Logout';\n\nfunction App(props) {\n  const { setUserData, user, applicationState } = props;\n\n  const authenticate = async () => {\n    try {\n      const authResponse = await axios.post(\"http://127.0.0.1:6969/api/auth\", { token: jwt });\n      const userData = {\n        id: authResponse.data.id,\n        email: authResponse.data.email,\n        loggedIn: true\n      };\n      setUserData(userData);\n    } catch (error) {\n      console.error('Error: failed to auth with jwt.')\n    }\n  }\n\n  useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt && !user.loggedIn) { authenticate(jwt); }\n  });\n\n  const renderMainSection = () => {\n    let toRender;\n\n    switch(applicationState.currentScreen) {\n      case 'LandingPage':\n        toRender = <LandingPage />;\n        break;\n      case 'GameSession':\n        toRender = <GameSession />;\n        break;\n      case 'Login':\n        toRender = <Login />;\n        break;\n      case 'Signup':\n        toRender = <Signup />;\n        break;\n      case 'Logout':\n        toRender = <Logout />;\n        break;\n      default:\n        toRender = <div>Error</div>;\n    }\n\n    return toRender;\n  }\n\n  return (\n    <div>\n      <TopMenu />\n      {applicationState.error && <ErrorModal />}\n      {applicationState.loading && <LoadingModal />}\n      {renderMainSection()}\n    </div>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    applicationState: state.applicationState,\n    user: state.user\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setUserData: setUserData(dispatch)\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n"]},"metadata":{},"sourceType":"module"}