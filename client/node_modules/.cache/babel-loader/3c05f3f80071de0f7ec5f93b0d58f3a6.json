{"ast":null,"code":"var _jsxFileName = \"/Users/artemk/background_game/frontend/src/App.js\";\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { setUserData } from './actions/userActions';\nimport TopMenu from './components/TopMenu';\nimport ErrorModal from './components/ErrorModal';\nimport LoadingModal from './components/LoadingModal';\nimport LandingPage from './components/LandingPage';\nimport GameSession from './components/GameSession/GameSession';\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport Logout from './components/Logout';\n\nfunction App(props) {\n  const {\n    setUserData,\n    user,\n    applicationState\n  } = props;\n\n  const authenticate = async () => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt && !user.loggedIn) {\n      try {\n        const authResponse = await axios.post(\"http://127.0.0.1:6969/api/auth\", {\n          token: jwt\n        });\n        const userData = {\n          id: authResponse.data.id,\n          email: authResponse.data.email,\n          loggedIn: true\n        };\n        setUserData(userData);\n      } catch (error) {\n        console.log('Error: failed to auth with jwt.');\n      }\n    }\n  };\n\n  useEffect(() => {\n    authenticate();\n  });\n\n  const renderMainSection = () => {\n    let toRender;\n\n    switch (applicationState.currentScreen) {\n      case 'LandingPage':\n        toRender = /*#__PURE__*/React.createElement(LandingPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'GameSession':\n        toRender = /*#__PURE__*/React.createElement(GameSession, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'Login':\n        toRender = /*#__PURE__*/React.createElement(Login, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'Signup':\n        toRender = /*#__PURE__*/React.createElement(Signup, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case 'Logout':\n        toRender = /*#__PURE__*/React.createElement(Logout, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      default:\n        toRender = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 20\n          }\n        }, \"Error\");\n    }\n\n    return toRender;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TopMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), applicationState.error && /*#__PURE__*/React.createElement(ErrorModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 34\n    }\n  }), applicationState.loading && /*#__PURE__*/React.createElement(LoadingModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 36\n    }\n  }), renderMainSection());\n}\n\nfunction mapStateToProps(state) {\n  return {\n    applicationState: state.applicationState,\n    user: state.user\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setUserData: setUserData(dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/artemk/background_game/frontend/src/App.js"],"names":["React","useEffect","connect","axios","setUserData","TopMenu","ErrorModal","LoadingModal","LandingPage","GameSession","Login","Signup","Logout","App","props","user","applicationState","authenticate","jwt","localStorage","getItem","loggedIn","authResponse","post","token","userData","id","data","email","error","console","log","renderMainSection","toRender","currentScreen","loading","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\nimport { setUserData } from './actions/userActions';\n\nimport TopMenu from './components/TopMenu';\nimport ErrorModal from './components/ErrorModal';\nimport LoadingModal from './components/LoadingModal';\nimport LandingPage from './components/LandingPage';\nimport GameSession from './components/GameSession/GameSession';\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport Logout from './components/Logout';\n\nfunction App(props) {\n  const { setUserData, user, applicationState } = props;\n\n  const authenticate = async () => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt && !user.loggedIn) {\n      try {\n        const authResponse = await axios.post(\"http://127.0.0.1:6969/api/auth\", { token: jwt });\n        const userData = {\n          id: authResponse.data.id,\n          email: authResponse.data.email,\n          loggedIn: true\n        };\n        setUserData(userData);\n      } catch (error) {\n        console.log('Error: failed to auth with jwt.')\n      }\n    }\n  }\n\n  useEffect(() => {\n    authenticate();\n  });\n\n  const renderMainSection = () => {\n    let toRender;\n\n    switch(applicationState.currentScreen) {\n      case 'LandingPage':\n        toRender = <LandingPage />;\n        break;\n      case 'GameSession':\n        toRender = <GameSession />;\n        break;\n      case 'Login':\n        toRender = <Login />;\n        break;\n      case 'Signup':\n        toRender = <Signup />;\n        break;\n      case 'Logout':\n        toRender = <Logout />;\n        break;\n      default:\n        toRender = <div>Error</div>;\n    }\n\n    return toRender;\n  }\n\n  return (\n    <div>\n      <TopMenu />\n      {applicationState.error && <ErrorModal />}\n      {applicationState.loading && <LoadingModal />}\n      {renderMainSection()}\n    </div>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    applicationState: state.applicationState,\n    user: state.user\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setUserData: setUserData(dispatch)\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n"]},"metadata":{},"sourceType":"module"}