(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),i=n(1),l=n(4),u={socket:{error:void 0,timeout:void 0,loading:void 0,connected:!1},gameSession:{gameSaveID:0,resources:0,gameState:{items:{equipped:[],inventory:[]},structures:{built:[],availableBuildSlots:1},consumables:[]},gameHistory:{resources:0,clicks:0,items:{purchased:[]},structures:{purchased:[]}},gameSchema:{itemShop:[],structureShop:[],consumableShop:[]}},applicationState:{currentScreen:"LandingPage",error:void 0,loading:!1},user:{id:0,email:"",loggedIn:!1}};var s=Object(l.c)({socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.socket,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SOCKET_SET_LOADING":return Object.assign({},e,{loading:t.payload,error:!1,connected:!1});case"SOCKET_CONNECT":return Object.assign({},e,{loading:!1,error:!1,connected:!0});case"SOCKET_SET_ERROR":return Object.assign({},e,{loading:!1,error:t.payload});default:return e}},gameSession:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.gameSession,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_GAME_SESSION":return Object.assign({},e,t.payload);default:return e}},applicationState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.applicationState,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_SCREEN":return Object.assign({},e,{currentScreen:t.payload,loading:!1,error:!1});case"SET_APPLICATION_ERROR":return Object.assign({},e,{error:t.payload,loading:!1});case"SET_APPLICATION_LOADING":return Object.assign({},e,{loading:t.payload,error:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.user,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object.assign({},e,{id:t.payload.id,email:t.payload.email,loggedIn:t.payload.loggedIn});case"SET_USER_LOGGED_IN":return Object.assign({},e,{loggedIn:t.payload});default:return e}}}),m=n(48),d=n.n(m);function E(e){return function(){e({type:"SOCKET_TRIGGER_CONNECT"})}}function p(e,t){e({type:"SOCKET_SET_ERROR",payload:t})}function v(e){return function(){e({type:"SOCKET_TRIGGER_DISCONNECT"})}}function g(e){return function(t){e({type:"SOCKET_EMIT",payload:t})}}function S(e){return function(t){e({type:"SET_CURRENT_SCREEN",payload:t})}}function f(e){return function(t){e({type:"SET_APPLICATION_ERROR",payload:t})}}function b(e){return function(t){e({type:"SET_APPLICATION_LOADING",payload:t})}}var h=function(e){var t;return function(n){return function(a){return function(r){var c=n.dispatch;switch(r.type){case"SOCKET_TRIGGER_CONNECT":!function(e,t){e({type:"SOCKET_SET_LOADING",payload:t})}(c,!0),t&&t.disconnect(),(t=d()(e)).on("connect",(function(e){var t=n.getState().user;!function(e,t){var n=localStorage.getItem("jwt"),a=t.id,r=localStorage.getItem("gameSaveID");g(e)({eventName:"startGameSession",data:{userID:a,gameSaveID:r,token:n}}),e({type:"SOCKET_CONNECT"})}(c,t)})),t.on("connect_error",(function(e){p(c,e)})),t.on("error",(function(e){p(c,e)})),t.on("gameSessionError",(function(e){p(c,e)})),t.on("operationFailed",(function(e){f(c)(e)})),t.on("connect_timeout",(function(e){p(c,e)})),t.on("disconnect",(function(e){p(c,{message:e})})),t.on("updateGameSession",(function(e){!function(e,t){t.gameSaveID&&localStorage.setItem("gameSaveID",t.gameSaveID),e({type:"UPDATE_GAME_SESSION",payload:t})}(c,e)}));break;case"SOCKET_TRIGGER_DISCONNECT":return void(t&&t.disconnect());case"SOCKET_EMIT":var o=r.payload.eventName,i=r.payload.data||{};return void(t&&t.connected?t.emit(o,i):p(c,{message:"Socket is not connected"}))}return a(r)}}}},y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,k=h("http://127.0.0.1:6969");var O=n(3),C=n.n(O),T=n(8),I=n(9),N=n.n(I);n(108);function A(e){return function(t){e({type:"SET_USER_DATA",payload:t})}}function w(e){return function(t){e({type:"SET_USER_LOGGED_IN",payload:t})}}var _=Object(i.b)((function(e){return{user:e.user}}),(function(e){return{connectToSocket:E(e),disconnectFromSocket:v(e),setCurrentScreen:S(e),setUserLoggedIn:w(e)}}))((function(e){var t=e.connectToSocket,n=e.disconnectFromSocket,a=e.setCurrentScreen,c=e.setUserLoggedIn,o=e.user.loggedIn,i=function(){a("Login")},l=function(){n(),localStorage.removeItem("jwt"),localStorage.removeItem("gameSaveID"),c(!1),a("Logout")},u=function(){n(),a("Signup")};return r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("button",{onClick:function(){a("GameSession"),t()}},"Play"),function(){var e=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:i},"Login"),r.a.createElement("button",{onClick:u},"Sign Up"));return o&&(e=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",null,"Profile"),r.a.createElement("button",{onClick:l},"Logout"))),e}())}));var j=Object(i.b)((function(e){return{applicationState:e.applicationState}}),(function(e){return{setApplicationError:f(e)}}))((function(e){var t=e.setApplicationError,n=e.applicationState.error;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",null,"Error: ",n&&n.message),r.a.createElement("button",{onClick:function(){t(!1)}},"Close"))}));var R=Object(i.b)((function(e){return{}}),(function(e){return{setApplicationLoading:b(e)}}))((function(e){var t=e.setApplicationLoading;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",null,"Loading"),r.a.createElement("button",{onClick:function(){t(!1)}},"Close"))}));var D=Object(i.b)((function(e){return{socket:e.socket}}),(function(e){return{connectToSocket:E(e),setCurrentScreen:S(e)}}))((function(e){var t=e.connectToSocket,n=e.setCurrentScreen;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{onClick:function(){n("GameSession"),t()}},"Start New Game"),r.a.createElement("button",{onClick:function(){n("Signup")}},"Sign Up"))}));var L=Object(i.b)((function(){return{}}),(function(e){return{socketEmit:g(e)}}))((function(e){return r.a.createElement("div",{className:"waste-container"},r.a.createElement("button",{className:"waste-button",onClick:function(){e.socketEmit({eventName:"areaClicked"})}},"Click me"))}));var x=Object(i.b)((function(e){return{gameSession:e.gameSession}}),(function(e){return{socketEmit:g(e)}}))((function(e){var t=e.socketEmit,n=e.gameSession.gameSchema.itemShop.map((function(e){if(e.shouldDisplay){var n=r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",e.name),r.a.createElement("div",null,"Price: ",e.price),r.a.createElement("div",null,"Description: ",e.description));return e.canBePurchased?r.a.createElement("div",null,n,r.a.createElement("button",{onClick:(a=e.name,function(){t({eventName:"itemAction",data:{actionType:"buy",itemName:a}})})},"Buy Item")):r.a.createElement("div",null,n,r.a.createElement("div",null,"Requirements to buy: ",e.canBePurchasedRequirements))}return r.a.createElement("div",null,r.a.createElement("div",null,"??? MYSTERY ITEM ???"),r.a.createElement("div",null,"Will show when: ",e.shouldDisplayRequirements));var a}));return r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("div",null,"Item Shop:"),n)}));var G=Object(i.b)((function(e){return{gameSession:e.gameSession}}),(function(e){return{socketEmit:g(e)}}))((function(e){var t,n=e.socketEmit,a=e.gameSession.gameState,c=function(e){return function(){n({eventName:"itemAction",data:{actionType:"equip",itemName:e}})}};return r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("div",null,"Inventory:"),(t=a.items.inventory,r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",e.name),r.a.createElement("div",null,"Price: ",e.price),r.a.createElement("div",null,"Description: ",e.description),r.a.createElement("button",{onClick:(t=e.name,function(){n({eventName:"itemAction",data:{actionType:"sell",itemName:t}})})},"Sell"),r.a.createElement("button",{onClick:c(e.name)},"Equip"));var t})))))}));var P=Object(i.b)((function(e){return{gameSession:e.gameSession}}),(function(e){return{socketEmit:g(e)}}))((function(e){var t,n=e.socketEmit,a=e.gameSession.gameState,c=function(e){return function(){n({eventName:"itemAction",data:{actionType:"unequip",equippedIndex:e}})}};return r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("div",null,"Equipped Items:"),(t=a.items.equipped,r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",e.name),r.a.createElement("button",{onClick:c(t)},"Unequip"))})))),r.a.createElement("button",{onClick:function(){n({eventName:"itemAction",data:{actionType:"buyEquipSlot"}})}},"+"))}));var U=Object(i.b)((function(e){return{gameSession:e.gameSession}}),(function(e){return{socketEmit:g(e)}}))((function(e){var t=e.socketEmit,n=e.gameSession.gameSchema.structureShop.map((function(e){if(e.shouldDisplay){var n=r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",e.name),r.a.createElement("div",null,"Price: ",e.price),r.a.createElement("div",null,"Description: ",e.description));return e.canBePurchased?r.a.createElement("div",null,n,r.a.createElement("button",{onClick:(a=e.name,function(){t({eventName:"structureAction",data:{actionType:"buy",structureName:a}})})},"Buy Structure")):r.a.createElement("div",null,n,r.a.createElement("div",null,"Requirements to buy: ",e.canBePurchasedRequirements))}return r.a.createElement("div",null,r.a.createElement("div",null,"??? MYSTERY STRUCTURE ???"),r.a.createElement("div",null,"Will show when: ",e.shouldDisplayRequirements));var a}));return r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("div",null,"Structure Shop:"),n)}));var q=Object(i.b)((function(e){return{gameSession:e.gameSession}}),(function(e){return{socketEmit:g(e)}}))((function(e){var t,n=e.socketEmit,a=e.gameSession.gameState,c=function(e){return function(){n({eventName:"structureAction",data:{actionType:"sell",builtIndex:e}})}};return r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("div",null,"Structures:"),(t=a.structures.built,r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",e.name),r.a.createElement("button",{onClick:c(t)},"Sell"))})))),r.a.createElement("button",{onClick:function(){n({eventName:"structureAction",data:{actionType:"buyBuildSlot"}})}},"+"))}));var F=Object(i.b)((function(e){return{gameSession:e.gameSession}}),(function(e){return{socketEmit:g(e)}}))((function(e){var t=e.socketEmit,n=e.gameSession.gameSchema.consumableShop.map((function(e){return e.shouldDisplay?r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",e.name),r.a.createElement("div",null,"Price: ",e.price),r.a.createElement("div",null,"Description: ",e.description),r.a.createElement("button",{onClick:(n=e.name,function(){t({eventName:"consumableAction",data:{actionType:"buy",consumableName:n}})})},"Buy Consumable")):r.a.createElement("div",null,r.a.createElement("div",null,"??? MYSTERY STRUCTURE ???"),r.a.createElement("div",null,"Will show when: ",e.shouldDisplayRequirements));var n}));return r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("div",null,"Consumable Shop:"),n)}));var K=Object(i.b)((function(e){return{gameSession:e.gameSession}}))((function(e){var t=e.gameSession.gameState.consumables;return r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("div",null,"Current Consumables:"),function(e){return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",e.name))})))}(t))}));var B=Object(i.b)((function(e){return{socket:e.socket,gameSession:e.gameSession}}),(function(e){return{connectToSocket:E(e),disconnectFromSocket:v(e),socketEmit:g(e),setCurrentScreen:S(e)}}))((function(e){var t=e.socket,n=t.error,a=t.loading,c=e.gameSession,o=c.resources,i=(c.gameState,e.connectToSocket);return e.disconnectFromSocket,e.setCurrentScreen,e.socketEmit,n?r.a.createElement("div",null,r.a.createElement("div",null,"There was an error"),r.a.createElement("button",{onClick:i},"Reconnect")):a?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(x,null),r.a.createElement(G,null),r.a.createElement("div",null,"Resources: ",o),r.a.createElement(L,null),r.a.createElement(P,null),r.a.createElement(U,null),r.a.createElement(q,null),r.a.createElement(F,null),r.a.createElement(K,null))})),M=n(5);var Y=Object(i.b)((function(e){return{socket:e.socket,user:e.user}}),(function(e){return{connectToSocket:E(e),setCurrentScreen:S(e),setUserData:A(e),setApplicationLoading:b(e),setApplicationError:f(e)}}))((function(e){var t=e.connectToSocket,n=e.setCurrentScreen,c=e.setUserData,o=e.user,i=e.setApplicationLoading,l=e.setApplicationError,u=Object(a.useState)("LoginForm"),s=Object(M.a)(u,2),m=s[0],d=s[1],E=Object(a.useState)(""),p=Object(M.a)(E,2),v=p[0],g=p[1],S=Object(a.useState)(""),f=Object(M.a)(S,2),b=f[0],h=f[1],y=function(e){g(e.target.value)},k=function(e){h(e.target.value)},O=function(){var e=Object(T.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i(!0),e.prev=2,e.next=5,N.a.post("http://127.0.0.1:6969/api/login",{email:v,password:b});case 5:n=e.sent,localStorage.setItem("jwt",n.data.jwt),a={id:n.data.id,email:n.data.email,loggedIn:!0},c(a),localStorage.removeItem("gameSaveID"),d("LoginSuccess"),i(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),l(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){n("GameSession"),t()};return r.a.createElement("div",null,function(){var e;switch(m){case"LoginForm":e=r.a.createElement("form",{onSubmit:O},r.a.createElement("h1",null,"Login Into Your Account"),r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",value:v,onChange:y,required:!0}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:b,onChange:k,minLength:"4",maxLength:"24",required:!0}),r.a.createElement("input",{type:"submit"}));break;case"LoginSuccess":e=r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",null,"Logged in as: ",o.email),r.a.createElement("div",null,"User ID: ",o.id),r.a.createElement("button",{onClick:I},"Start New Game"));break;default:e=r.a.createElement("div",null,"Error")}return e}())}));var W=Object(i.b)((function(e){return{socket:e.socket,user:e.user,gameSession:e.gameSession}}),(function(e){return{connectToSocket:E(e),setCurrentScreen:S(e),setUserData:A(e),setApplicationLoading:b(e),setApplicationError:f(e)}}))((function(e){var t=e.connectToSocket,n=e.setCurrentScreen,c=e.setUserData,o=e.user,i=e.setApplicationLoading,l=e.setApplicationError,u=e.gameSession,s=Object(a.useState)("SignupForm"),m=Object(M.a)(s,2),d=m[0],E=m[1],p=Object(a.useState)(""),v=Object(M.a)(p,2),g=v[0],S=v[1],f=Object(a.useState)(""),b=Object(M.a)(f,2),h=b[0],y=b[1],k=function(e){S(e.target.value)},O=function(e){y(e.target.value)},I=function(){var e=Object(T.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i(!0),e.prev=2,e.next=5,N.a.post("http://127.0.0.1:6969/api/signup",{email:g,password:h,gameSaveID:u.gameSaveID||localStorage.getItem("gameSaveID")});case 5:n=e.sent,localStorage.setItem("jwt",n.data.jwt),a={id:n.data.id,email:n.data.email,loggedIn:!0},c(a),E("SignupSuccess"),i(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),l(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){n("GameSession"),t()};return r.a.createElement("div",null,function(){var e;switch(d){case"SignupForm":e=r.a.createElement("form",{onSubmit:I},r.a.createElement("h1",null,"Sign Up For An Account"),r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",value:g,onChange:k,required:!0}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:h,onChange:O,minLength:"4",maxLength:"24",required:!0}),r.a.createElement("input",{type:"submit"}));break;case"SignupSuccess":e=r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",null,"Congrats, your account had been created!"),r.a.createElement("div",null,"Signed in as: ",o.email),r.a.createElement("div",null,"User ID: ",o.id),r.a.createElement("button",{onClick:A},"Start New Game"));break;default:e=r.a.createElement("div",null,"Error")}return e}())}));var J=function(e){return r.a.createElement("div",null,"You have logged out.")};var X=Object(i.b)((function(e){return{applicationState:e.applicationState,user:e.user}}),(function(e){return{setUserData:A(e)}}))((function(e){var t=e.setUserData,n=e.user,c=e.applicationState,o=function(){var e=Object(T.a)(C.a.mark((function e(n){var a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("http://127.0.0.1:6969/api/auth",{token:n});case 3:a=e.sent,r={id:a.data.id,email:a.data.email,loggedIn:!0},t(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error: failed to auth with jwt.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=localStorage.getItem("jwt");e&&!n.loggedIn&&o(e)})),r.a.createElement("div",null,r.a.createElement(_,null),c.error&&r.a.createElement(j,null),c.loading&&r.a.createElement(R,null),function(){var e;switch(c.currentScreen){case"LandingPage":e=r.a.createElement(D,null);break;case"GameSession":e=r.a.createElement(B,null);break;case"Login":e=r.a.createElement(Y,null);break;case"Signup":e=r.a.createElement(W,null);break;case"Logout":e=r.a.createElement(J,null);break;default:e=r.a.createElement("div",null,"Error")}return e}())}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=Object(l.e)(s,y(Object(l.a)(k)));o.a.render(r.a.createElement(i.a,{store:H},r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},49:function(e,t,n){e.exports=n(109)},88:function(e,t){}},[[49,1,2]]]);
//# sourceMappingURL=main.0a81eb9f.chunk.js.map